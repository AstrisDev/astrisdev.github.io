# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –¥–µ–ø–ª–æ–π —Å–∞–π—Ç–∞ –Ω–∞ GitHub Pages.

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. ‚úÖ Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è `gwisp2/russian-stamps`
2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `DataSource` –≤ `tools/internal/pipeline_options.go`
3. ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ GitHub Secrets

## üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Secrets

### **–®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–æ—Ä–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è russian-stamps**

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://github.com/gwisp2/russian-stamps
2. –ù–∞–∂–º–∏—Ç–µ **Fork** –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–æ—Ä–∫ –≤ —Å–≤–æ–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ

### **–®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ DataSource –≤ –∫–æ–¥–µ**

–ò–∑–º–µ–Ω–∏—Ç–µ –≤ `tools/internal/pipeline_options.go`:

```go
DataSource string `long:"datasource" default:"https://github.com/YOUR_USERNAME/russian-stamps.git"`
```

### **–®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ Personal Access Token**

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings ‚Üí Developer settings ‚Üí Personal access tokens ‚Üí Fine-grained tokens**
2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏ –¥–ª—è –≤–∞—à–µ–≥–æ —Ñ–æ—Ä–∫–∞ `russian-stamps`:
    - **Repository: Contents** - write
    - **Repository: Metadata** - read

### **–®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–∞ (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)**

**–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π GITHUB_TOKEN** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤.

–ï—Å–ª–∏ –Ω—É–∂–Ω—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞, –¥–æ–±–∞–≤—å—Ç–µ –≤ `Settings ‚Üí Secrets and variables ‚Üí Actions`:

```
DATA_REPO_TOKEN = –≤–∞—à_personal_access_token
```

## üîÑ –í–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –ï–¥–∏–Ω—ã–π workflow (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç `update-and-deploy.yml` - –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –∏ –ø—Ä–∏ push.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

-   ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
-   ‚úÖ –í—Å–µ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
-   ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–¥–∞
-   ‚ö†Ô∏è –ë–æ–ª–µ–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –†–∞–∑–¥–µ–ª—å–Ω—ã–µ workflows**

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç:

-   `update-data-source.yml` - –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–∫–µ
-   `deploy-on-data-update.yml` - –¥–µ–ø–ª–æ–∏—Ç –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

-   ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
-   ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
-   ‚úÖ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π –∫–æ–¥–∞ –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è —Å–∫—Ä–µ–π–ø–∏–Ω–≥–∞
-   ‚ö†Ô∏è –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

## ‚è∞ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### **–¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

-   **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**: –∫–∞–∂–¥—ã–µ 6-12 —á–∞—Å–æ–≤
-   **–°–∫—Ä–µ–π–ø–∏–Ω–≥ rusmarka.ru**: –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
-   **–î–µ–ø–ª–æ–π**: –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞ –∏–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### **–ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å:**

```yaml
schedule:
    - cron: "0 */4 * * *" # –ö–∞–∂–¥—ã–µ 4 —á–∞—Å–∞
    - cron: "0 9,21 * * *" # –í 9:00 –∏ 21:00 UTC
```

## üéØ –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

### **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `Actions`
2. –í—ã–±–µ—Ä–∏—Ç–µ `Update Data and Deploy`
3. –ù–∞–∂–º–∏—Ç–µ `Run workflow`
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `Force scrape rusmarka.ru: true`

### **–î–µ–ø–ª–æ–π –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:**

1. –í—ã–±–µ—Ä–∏—Ç–µ `Deploy to GitHub Pages`
2. –ù–∞–∂–º–∏—Ç–µ `Run workflow`

## üîß –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:**

1. –õ–æ–≥–∏ –≤ GitHub Actions
2. Commits –≤ —Ñ–æ—Ä–∫–µ –¥–∞–Ω–Ω—ã—Ö
3. –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–µ–ø–ª–æ—è –Ω–∞ GitHub Pages

### **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

-   **–¢–∞–π–º–∞—É—Ç —Å–∫—Ä–µ–π–ø–∏–Ω–≥–∞** - —É–≤–µ–ª–∏—á—å—Ç–µ `sleep` –≤ workflow
-   **–û—à–∏–±–∫–∏ –¥–æ—Å—Ç—É–ø–∞** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω—ã
-   **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π** - –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–æ–≤—ã—Ö –º–∞—Ä–æ–∫ –Ω–µ—Ç

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```
–û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
‚îú‚îÄ‚îÄ frontend/          # React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ tools/            # Go –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ .github/workflows/  # GitHub Actions
‚îî‚îÄ‚îÄ storage/          # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è)

–§–æ—Ä–∫ –¥–∞–Ω–Ω—ã—Ö:
‚îú‚îÄ‚îÄ stamps.json       # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –º–∞—Ä–æ–∫
‚îú‚îÄ‚îÄ images/          # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–∞—Ä–æ–∫
‚îî‚îÄ‚îÄ README.md
```

## üö® –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ** `storage/` –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. **–¢–æ–∫–µ–Ω—ã** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –≤ Secrets
3. **–§–æ—Ä–∫ –¥–∞–Ω–Ω—ã—Ö** –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. **GitHub Pages** –¥–µ–ø–ª–æ–∏—Ç—Å—è –≤ –≤–µ—Ç–∫—É gh-pages

## üÜò Troubleshooting

### Workflow –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:

-   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å YAML
-   –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ GitHub Actions –≤–∫–ª—é—á–µ–Ω—ã

### –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–æ—Ä–∫—É:

-   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATA_REPO_TOKEN`
-   –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ç–æ–∫–µ–Ω –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–æ—Ä–∫

### –°–∞–π—Ç –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:

-   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GitHub Pages
-   –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ artifact –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
