name: Build Tools

on:
    workflow_dispatch:

jobs:
    build-go:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v3
            - uses: actions/setup-go@v4
              with:
                  go-version: "1.21"
            - name: Build tools
              run: cd tools && CGO_ENABLED=0 go build -o . -buildvcs=false ./cmd/...

    build-frontend:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v3
            - uses: actions/setup-node@v3
              with:
                  node-version: "18"
            - name: Build frontend
              run: cd frontend && npm ci && npm run build
              env:
                  VITE_SF_STAMPS_DATA_URL: "./data/stamps.json"
                  VITE_SF_SHOPS_DATA_URL: "./data/shops.json"
